{"title":"数据库优化第一步看懂explain","uid":"451ee4a035442e0633cafdb9c68dc333","slug":"arary/Explain","date":"2024-05-20T04:01:51.000Z","updated":"2024-07-06T08:20:32.534Z","comments":true,"path":"api/articles/arary/Explain.json","keywords":null,"cover":"https://p1.meituan.net/csc/a8a726107666a0fe991022b3a5b1311568538.jpg","content":"<h2 id=\"explain常用字段\"><a href=\"#explain常用字段\" class=\"headerlink\" title=\"explain常用字段\"></a>explain常用字段</h2><blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><ul>\n<li>type ：访问的类型</li>\n<li>key ：实际使用到的索引，如果为NULL，则没有使用索引</li>\n<li>ref ：显示索引的哪一列被使用了，如果可能的话，是一个常数，哪些列或常量被用于查找索引列上的值</li>\n<li>rows ：根据表统计信息及索引选用情况，大致估算出找到所需的记录所需读取的行数</li>\n<li>Extra ：包含不适合在其它列中显示但十分重要的额外信息</li>\n</ul></blockquote>\n<h2 id=\"表数据\"><a href=\"#表数据\" class=\"headerlink\" title=\"表数据\"></a>表数据</h2><div class=\"language-sql\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">sql</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #F78C6C\">CREATE</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">TABLE</span><span style=\"color: #BABED8\"> `</span><span style=\"color: #82AAFF\">user</span><span style=\"color: #BABED8\">` (</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  </span><span style=\"color: #89DDFF\">`</span><span style=\"color: #C3E88D\">id</span><span style=\"color: #89DDFF\">`</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">int</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">NOT NULL</span><span style=\"color: #BABED8\"> AUTO_INCREMENT,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  </span><span style=\"color: #89DDFF\">`</span><span style=\"color: #C3E88D\">name</span><span style=\"color: #89DDFF\">`</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">varchar</span><span style=\"color: #BABED8\">(</span><span style=\"color: #F78C6C\">255</span><span style=\"color: #BABED8\">) </span><span style=\"color: #F78C6C\">CHARACTER</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">SET</span><span style=\"color: #BABED8\"> armscii8 </span><span style=\"color: #C792EA\">COLLATE</span><span style=\"color: #BABED8\"> armscii8_general_ci </span><span style=\"color: #F78C6C\">NOT NULL</span><span style=\"color: #BABED8\">,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  </span><span style=\"color: #89DDFF\">`</span><span style=\"color: #C3E88D\">account</span><span style=\"color: #89DDFF\">`</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">varchar</span><span style=\"color: #BABED8\">(</span><span style=\"color: #F78C6C\">255</span><span style=\"color: #BABED8\">) </span><span style=\"color: #F78C6C\">CHARACTER</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">SET</span><span style=\"color: #BABED8\"> armscii8 </span><span style=\"color: #C792EA\">COLLATE</span><span style=\"color: #BABED8\"> armscii8_general_ci </span><span style=\"color: #F78C6C\">NOT NULL</span><span style=\"color: #BABED8\">,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  </span><span style=\"color: #89DDFF\">`</span><span style=\"color: #C3E88D\">pass</span><span style=\"color: #89DDFF\">`</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">varchar</span><span style=\"color: #BABED8\">(</span><span style=\"color: #F78C6C\">255</span><span style=\"color: #BABED8\">) </span><span style=\"color: #F78C6C\">CHARACTER</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">SET</span><span style=\"color: #BABED8\"> armscii8 </span><span style=\"color: #C792EA\">COLLATE</span><span style=\"color: #BABED8\"> armscii8_general_ci </span><span style=\"color: #F78C6C\">NOT NULL</span><span style=\"color: #BABED8\">,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  </span><span style=\"color: #89DDFF\">`</span><span style=\"color: #C3E88D\">email</span><span style=\"color: #89DDFF\">`</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">varchar</span><span style=\"color: #BABED8\">(</span><span style=\"color: #F78C6C\">255</span><span style=\"color: #BABED8\">) </span><span style=\"color: #F78C6C\">CHARACTER</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">SET</span><span style=\"color: #BABED8\"> armscii8 </span><span style=\"color: #C792EA\">COLLATE</span><span style=\"color: #BABED8\"> armscii8_general_ci </span><span style=\"color: #F78C6C\">NULL</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">DEFAULT</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">NULL</span><span style=\"color: #BABED8\">,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  </span><span style=\"color: #C792EA\">PRIMARY KEY</span><span style=\"color: #BABED8\"> (</span><span style=\"color: #89DDFF\">`</span><span style=\"color: #C3E88D\">id</span><span style=\"color: #89DDFF\">`</span><span style=\"color: #BABED8\">) </span><span style=\"color: #F78C6C\">USING</span><span style=\"color: #BABED8\"> BTREE</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">) ENGINE </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> InnoDB </span><span style=\"color: #F78C6C\">CHARACTER</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">SET</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> armscii8 </span><span style=\"color: #C792EA\">COLLATE</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> armscii8_general_ci ROW_FORMAT </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">Dynamic</span><span style=\"color: #BABED8\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #F78C6C\">INSERT INTO</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">`</span><span style=\"color: #C3E88D\">test</span><span style=\"color: #89DDFF\">`</span><span style=\"color: #BABED8\">.</span><span style=\"color: #89DDFF\">`</span><span style=\"color: #C3E88D\">user</span><span style=\"color: #89DDFF\">`</span><span style=\"color: #BABED8\"> (</span><span style=\"color: #89DDFF\">`</span><span style=\"color: #C3E88D\">id</span><span style=\"color: #89DDFF\">`</span><span style=\"color: #BABED8\">, </span><span style=\"color: #89DDFF\">`</span><span style=\"color: #C3E88D\">name</span><span style=\"color: #89DDFF\">`</span><span style=\"color: #BABED8\">, </span><span style=\"color: #89DDFF\">`</span><span style=\"color: #C3E88D\">account</span><span style=\"color: #89DDFF\">`</span><span style=\"color: #BABED8\">, </span><span style=\"color: #89DDFF\">`</span><span style=\"color: #C3E88D\">pass</span><span style=\"color: #89DDFF\">`</span><span style=\"color: #BABED8\">, </span><span style=\"color: #89DDFF\">`</span><span style=\"color: #C3E88D\">email</span><span style=\"color: #89DDFF\">`</span><span style=\"color: #BABED8\">) </span><span style=\"color: #F78C6C\">VALUES</span><span style=\"color: #BABED8\"> (</span><span style=\"color: #F78C6C\">1</span><span style=\"color: #BABED8\">, </span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #C3E88D\">User1</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #BABED8\">, </span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #C3E88D\">user1</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #BABED8\">, </span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #C3E88D\">pass1</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #BABED8\">, </span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #C3E88D\">user1@example.com</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #BABED8\">);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">。。。</span></span></code></pre></div><h2 id=\"常用分析\"><a href=\"#常用分析\" class=\"headerlink\" title=\"常用分析\"></a>常用分析</h2><div class=\"language-sql\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">sql</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #BABED8\">EXPLAIN </span><span style=\"color: #F78C6C\">select</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">*</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">from</span><span style=\"color: #BABED8\"> user </span><span style=\"color: #F78C6C\">where</span><span style=\"color: #BABED8\"> id </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">14</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">+</span><span style=\"color: #676E95; font-style: italic\">----+-------------+-------+------------+-------+---------------+---------+---------+-------+------+----------+-------+</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">| id | select_type | </span><span style=\"color: #F78C6C\">table</span><span style=\"color: #BABED8\"> | partitions | </span><span style=\"color: #F78C6C\">type</span><span style=\"color: #BABED8\">  | possible_keys | </span><span style=\"color: #F78C6C\">key</span><span style=\"color: #BABED8\">     | key_len | ref   | </span><span style=\"color: #F78C6C\">rows</span><span style=\"color: #BABED8\"> | filtered | Extra |</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">+</span><span style=\"color: #676E95; font-style: italic\">----+-------------+-------+------------+-------+---------------+---------+---------+-------+------+----------+-------+</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">|  </span><span style=\"color: #F78C6C\">1</span><span style=\"color: #BABED8\"> | </span><span style=\"color: #F78C6C\">SIMPLE</span><span style=\"color: #BABED8\">      | user  | </span><span style=\"color: #F78C6C\">NULL</span><span style=\"color: #BABED8\">       | const | </span><span style=\"color: #F78C6C\">PRIMARY</span><span style=\"color: #BABED8\">       | </span><span style=\"color: #F78C6C\">PRIMARY</span><span style=\"color: #BABED8\"> | </span><span style=\"color: #F78C6C\">4</span><span style=\"color: #BABED8\">       | const |    </span><span style=\"color: #F78C6C\">1</span><span style=\"color: #BABED8\"> |   </span><span style=\"color: #F78C6C\">100</span><span style=\"color: #BABED8\">.</span><span style=\"color: #F78C6C\">00</span><span style=\"color: #BABED8\"> | </span><span style=\"color: #F78C6C\">NULL</span><span style=\"color: #BABED8\">  |</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">+</span><span style=\"color: #676E95; font-style: italic\">----+-------------+-------+------------+-------+---------------+---------+---------+-------+------+----------+-------+</span></span>\n<span class=\"line\"><span style=\"color: #F78C6C\">1</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">row</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">in</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">set</span><span style=\"color: #BABED8\">, </span><span style=\"color: #F78C6C\">1</span><span style=\"color: #BABED8\"> warning (</span><span style=\"color: #F78C6C\">0</span><span style=\"color: #BABED8\">.</span><span style=\"color: #F78C6C\">00</span><span style=\"color: #BABED8\"> sec)</span></span></code></pre></div><blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>key: PRIMARY 走的主键索引</p>\n<p>ref： const 判断条件为常数匹配</p>\n<p>rows： 1  扫描数据条数</p></blockquote>\n<p>范围匹配</p>\n<div class=\"language-sql\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">sql</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #BABED8\">EXPLAIN </span><span style=\"color: #F78C6C\">select</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">*</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">from</span><span style=\"color: #BABED8\"> user </span><span style=\"color: #F78C6C\">where</span><span style=\"color: #BABED8\"> id </span><span style=\"color: #89DDFF\">&gt;=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">10</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">and</span><span style=\"color: #BABED8\"> id </span><span style=\"color: #89DDFF\">&lt;=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">50</span><span style=\"color: #BABED8\">;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">+</span><span style=\"color: #676E95; font-style: italic\">----+-------------+-------+------------+-------+---------------+---------+---------+------+------+----------+-------------+</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">| id | select_type | </span><span style=\"color: #F78C6C\">table</span><span style=\"color: #BABED8\"> | partitions | </span><span style=\"color: #F78C6C\">type</span><span style=\"color: #BABED8\">  | possible_keys | </span><span style=\"color: #F78C6C\">key</span><span style=\"color: #BABED8\">     | key_len | ref  | </span><span style=\"color: #F78C6C\">rows</span><span style=\"color: #BABED8\"> | filtered | Extra       |</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">+</span><span style=\"color: #676E95; font-style: italic\">----+-------------+-------+------------+-------+---------------+---------+---------+------+------+----------+-------------+</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">|  </span><span style=\"color: #F78C6C\">1</span><span style=\"color: #BABED8\"> | </span><span style=\"color: #F78C6C\">SIMPLE</span><span style=\"color: #BABED8\">      | user  | </span><span style=\"color: #F78C6C\">NULL</span><span style=\"color: #BABED8\">       | </span><span style=\"color: #F78C6C\">range</span><span style=\"color: #BABED8\"> | </span><span style=\"color: #F78C6C\">PRIMARY</span><span style=\"color: #BABED8\">       | </span><span style=\"color: #F78C6C\">PRIMARY</span><span style=\"color: #BABED8\"> | </span><span style=\"color: #F78C6C\">4</span><span style=\"color: #BABED8\">       | </span><span style=\"color: #F78C6C\">NULL</span><span style=\"color: #BABED8\"> |   </span><span style=\"color: #F78C6C\">41</span><span style=\"color: #BABED8\"> |   </span><span style=\"color: #F78C6C\">100</span><span style=\"color: #BABED8\">.</span><span style=\"color: #F78C6C\">00</span><span style=\"color: #BABED8\"> | </span><span style=\"color: #F78C6C\">Using</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">where</span><span style=\"color: #BABED8\"> |</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">+</span><span style=\"color: #676E95; font-style: italic\">----+-------------+-------+------------+-------+---------------+---------+---------+------+------+----------+-------------+</span></span>\n<span class=\"line\"><span style=\"color: #F78C6C\">1</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">row</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">in</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">set</span><span style=\"color: #BABED8\">, </span><span style=\"color: #F78C6C\">1</span><span style=\"color: #BABED8\"> warning (</span><span style=\"color: #F78C6C\">0</span><span style=\"color: #BABED8\">.</span><span style=\"color: #F78C6C\">00</span><span style=\"color: #BABED8\"> sec)</span></span></code></pre></div><blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>key: PRIMARY 主键索引</p>\n<p>type： range 区间扫描</p>\n<p>rows: 41 扫描行数</p>\n<p>Extra： Using where 使用了where条件</p></blockquote>\n<p>唯一约束</p>\n<div class=\"language-sql\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">sql</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #676E95; font-style: italic\">-- 将account字段设置为唯一约束</span></span>\n<span class=\"line\"><span style=\"color: #F78C6C\">ALTER</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">TABLE</span><span style=\"color: #BABED8\"> user </span><span style=\"color: #F78C6C\">ADD</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">CONSTRAINT</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">UNIQUE</span><span style=\"color: #BABED8\">(account);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">mysql</span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #BABED8\"> EXPLAIN </span><span style=\"color: #F78C6C\">select</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">*</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">from</span><span style=\"color: #BABED8\"> user </span><span style=\"color: #F78C6C\">where</span><span style=\"color: #BABED8\"> account </span><span style=\"color: #F78C6C\">like</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #C3E88D\">user%</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #BABED8\">；</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">+</span><span style=\"color: #676E95; font-style: italic\">----+-------------+-------+------------+-------+---------------+---------+---------+------+------+----------+-----------------------+</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">| id | select_type | </span><span style=\"color: #F78C6C\">table</span><span style=\"color: #BABED8\"> | partitions | </span><span style=\"color: #F78C6C\">type</span><span style=\"color: #BABED8\">  | possible_keys | </span><span style=\"color: #F78C6C\">key</span><span style=\"color: #BABED8\">     | key_len | ref  | </span><span style=\"color: #F78C6C\">rows</span><span style=\"color: #BABED8\"> | filtered | Extra                 |</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">+</span><span style=\"color: #676E95; font-style: italic\">----+-------------+-------+------------+-------+---------------+---------+---------+------+------+----------+-----------------------+</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">|  </span><span style=\"color: #F78C6C\">1</span><span style=\"color: #BABED8\"> | </span><span style=\"color: #F78C6C\">SIMPLE</span><span style=\"color: #BABED8\">      | user  | </span><span style=\"color: #F78C6C\">NULL</span><span style=\"color: #BABED8\">       | </span><span style=\"color: #F78C6C\">range</span><span style=\"color: #BABED8\"> | account       | account | </span><span style=\"color: #F78C6C\">257</span><span style=\"color: #BABED8\">     | </span><span style=\"color: #F78C6C\">NULL</span><span style=\"color: #BABED8\"> |   </span><span style=\"color: #F78C6C\">51</span><span style=\"color: #BABED8\"> |   </span><span style=\"color: #F78C6C\">100</span><span style=\"color: #BABED8\">.</span><span style=\"color: #F78C6C\">00</span><span style=\"color: #BABED8\"> | </span><span style=\"color: #F78C6C\">Using</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">index</span><span style=\"color: #BABED8\"> condition |</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">+</span><span style=\"color: #676E95; font-style: italic\">----+-------------+-------+------------+-------+---------------+---------+---------+------+------+----------+-----------------------+</span></span>\n<span class=\"line\"><span style=\"color: #F78C6C\">1</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">row</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">in</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">set</span><span style=\"color: #BABED8\">, </span><span style=\"color: #F78C6C\">1</span><span style=\"color: #BABED8\"> warning (</span><span style=\"color: #F78C6C\">0</span><span style=\"color: #BABED8\">.</span><span style=\"color: #F78C6C\">00</span><span style=\"color: #BABED8\"> sec)</span></span></code></pre></div><blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>key: account account字段索引</p>\n<p>row: 51扫描行数</p>\n<p>Extra： Using index condition 使用索引判断</p></blockquote>\n<div class=\"language-sql\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">sql</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #BABED8\">mysql</span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #BABED8\"> EXPLAIN </span><span style=\"color: #F78C6C\">select</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">*</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">from</span><span style=\"color: #BABED8\"> user </span><span style=\"color: #F78C6C\">where</span><span style=\"color: #BABED8\"> account </span><span style=\"color: #F78C6C\">like</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #C3E88D\">%user</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #BABED8\">;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">+</span><span style=\"color: #676E95; font-style: italic\">----+-------------+-------+------------+------+---------------+------+---------+------+------+----------+-------------+</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">| id | select_type | </span><span style=\"color: #F78C6C\">table</span><span style=\"color: #BABED8\"> | partitions | </span><span style=\"color: #F78C6C\">type</span><span style=\"color: #BABED8\"> | possible_keys | </span><span style=\"color: #F78C6C\">key</span><span style=\"color: #BABED8\">  | key_len | ref  | </span><span style=\"color: #F78C6C\">rows</span><span style=\"color: #BABED8\"> | filtered | Extra       |</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">+</span><span style=\"color: #676E95; font-style: italic\">----+-------------+-------+------------+------+---------------+------+---------+------+------+----------+-------------+</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">|  </span><span style=\"color: #F78C6C\">1</span><span style=\"color: #BABED8\"> | </span><span style=\"color: #F78C6C\">SIMPLE</span><span style=\"color: #BABED8\">      | user  | </span><span style=\"color: #F78C6C\">NULL</span><span style=\"color: #BABED8\">       | ALL  | </span><span style=\"color: #F78C6C\">NULL</span><span style=\"color: #BABED8\">          | </span><span style=\"color: #F78C6C\">NULL</span><span style=\"color: #BABED8\"> | </span><span style=\"color: #F78C6C\">NULL</span><span style=\"color: #BABED8\">    | </span><span style=\"color: #F78C6C\">NULL</span><span style=\"color: #BABED8\"> | </span><span style=\"color: #F78C6C\">1051</span><span style=\"color: #BABED8\"> |    </span><span style=\"color: #F78C6C\">11</span><span style=\"color: #BABED8\">.</span><span style=\"color: #F78C6C\">11</span><span style=\"color: #BABED8\"> | </span><span style=\"color: #F78C6C\">Using</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">where</span><span style=\"color: #BABED8\"> |</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">+</span><span style=\"color: #676E95; font-style: italic\">----+-------------+-------+------------+------+---------------+------+---------+------+------+----------+-------------+</span></span>\n<span class=\"line\"><span style=\"color: #F78C6C\">1</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">row</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">in</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">set</span><span style=\"color: #BABED8\">, </span><span style=\"color: #F78C6C\">1</span><span style=\"color: #BABED8\"> warning (</span><span style=\"color: #F78C6C\">0</span><span style=\"color: #BABED8\">.</span><span style=\"color: #F78C6C\">00</span><span style=\"color: #BABED8\"> sec)</span></span></code></pre></div><blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>type: ALL 全表扫描 常见的索引失效</p></blockquote>\n<div class=\"language-sql\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">sql</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #BABED8\">mysql</span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #BABED8\"> EXPLAIN </span><span style=\"color: #F78C6C\">select</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">*</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">from</span><span style=\"color: #BABED8\"> user </span><span style=\"color: #F78C6C\">where</span><span style=\"color: #BABED8\"> id </span><span style=\"color: #89DDFF\">&gt;=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">5</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">and</span><span style=\"color: #BABED8\"> id </span><span style=\"color: #89DDFF\">&lt;=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">10</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">order by</span><span style=\"color: #BABED8\"> account;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">+</span><span style=\"color: #676E95; font-style: italic\">----+-------------+-------+------------+-------+---------------+---------+---------+------+------+----------+-----------------------------+</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">| id | select_type | </span><span style=\"color: #F78C6C\">table</span><span style=\"color: #BABED8\"> | partitions | </span><span style=\"color: #F78C6C\">type</span><span style=\"color: #BABED8\">  | possible_keys | </span><span style=\"color: #F78C6C\">key</span><span style=\"color: #BABED8\">     | key_len | ref  | </span><span style=\"color: #F78C6C\">rows</span><span style=\"color: #BABED8\"> | filtered | Extra                       |</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">+</span><span style=\"color: #676E95; font-style: italic\">----+-------------+-------+------------+-------+---------------+---------+---------+------+------+----------+-----------------------------+</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">|  </span><span style=\"color: #F78C6C\">1</span><span style=\"color: #BABED8\"> | </span><span style=\"color: #F78C6C\">SIMPLE</span><span style=\"color: #BABED8\">      | user  | </span><span style=\"color: #F78C6C\">NULL</span><span style=\"color: #BABED8\">       | </span><span style=\"color: #F78C6C\">range</span><span style=\"color: #BABED8\"> | </span><span style=\"color: #F78C6C\">PRIMARY</span><span style=\"color: #BABED8\">       | </span><span style=\"color: #F78C6C\">PRIMARY</span><span style=\"color: #BABED8\"> | </span><span style=\"color: #F78C6C\">4</span><span style=\"color: #BABED8\">       | </span><span style=\"color: #F78C6C\">NULL</span><span style=\"color: #BABED8\"> |    </span><span style=\"color: #F78C6C\">6</span><span style=\"color: #BABED8\"> |   </span><span style=\"color: #F78C6C\">100</span><span style=\"color: #BABED8\">.</span><span style=\"color: #F78C6C\">00</span><span style=\"color: #BABED8\"> | </span><span style=\"color: #F78C6C\">Using</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">where</span><span style=\"color: #BABED8\">; </span><span style=\"color: #F78C6C\">Using</span><span style=\"color: #BABED8\"> filesort |</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">+</span><span style=\"color: #676E95; font-style: italic\">----+-------------+-------+------------+-------+---------------+---------+---------+------+------+----------+-----------------------------+</span></span>\n<span class=\"line\"><span style=\"color: #F78C6C\">1</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">row</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">in</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">set</span><span style=\"color: #BABED8\">, </span><span style=\"color: #F78C6C\">1</span><span style=\"color: #BABED8\"> warning (</span><span style=\"color: #F78C6C\">0</span><span style=\"color: #BABED8\">.</span><span style=\"color: #F78C6C\">00</span><span style=\"color: #BABED8\"> sec)</span></span></code></pre></div><blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>Extra: Using where; Using filesort 使用条件判断，将判断出的数据进行文件排序（通常是以为没走索引所以才需要排序）</p></blockquote>\n<div class=\"language-sql\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">sql</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #BABED8\">mysql</span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #BABED8\"> explain </span><span style=\"color: #F78C6C\">select</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">count</span><span style=\"color: #BABED8\">(</span><span style=\"color: #89DDFF\">*</span><span style=\"color: #BABED8\">) </span><span style=\"color: #F78C6C\">from</span><span style=\"color: #BABED8\"> user </span><span style=\"color: #F78C6C\">group by</span><span style=\"color: #BABED8\"> pass;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">+</span><span style=\"color: #676E95; font-style: italic\">----+-------------+-------+------------+------+---------------+------+---------+------+------+----------+-----------------+</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">| id | select_type | </span><span style=\"color: #F78C6C\">table</span><span style=\"color: #BABED8\"> | partitions | </span><span style=\"color: #F78C6C\">type</span><span style=\"color: #BABED8\"> | possible_keys | </span><span style=\"color: #F78C6C\">key</span><span style=\"color: #BABED8\">  | key_len | ref  | </span><span style=\"color: #F78C6C\">rows</span><span style=\"color: #BABED8\"> | filtered | Extra           |</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">+</span><span style=\"color: #676E95; font-style: italic\">----+-------------+-------+------------+------+---------------+------+---------+------+------+----------+-----------------+</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">|  </span><span style=\"color: #F78C6C\">1</span><span style=\"color: #BABED8\"> | </span><span style=\"color: #F78C6C\">SIMPLE</span><span style=\"color: #BABED8\">      | user  | </span><span style=\"color: #F78C6C\">NULL</span><span style=\"color: #BABED8\">       | ALL  | </span><span style=\"color: #F78C6C\">NULL</span><span style=\"color: #BABED8\">          | </span><span style=\"color: #F78C6C\">NULL</span><span style=\"color: #BABED8\"> | </span><span style=\"color: #F78C6C\">NULL</span><span style=\"color: #BABED8\">    | </span><span style=\"color: #F78C6C\">NULL</span><span style=\"color: #BABED8\"> | </span><span style=\"color: #F78C6C\">1051</span><span style=\"color: #BABED8\"> |   </span><span style=\"color: #F78C6C\">100</span><span style=\"color: #BABED8\">.</span><span style=\"color: #F78C6C\">00</span><span style=\"color: #BABED8\"> | </span><span style=\"color: #F78C6C\">Using</span><span style=\"color: #BABED8\"> temporary |</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">+</span><span style=\"color: #676E95; font-style: italic\">----+-------------+-------+------------+------+---------------+------+---------+------+------+----------+-----------------+</span></span>\n<span class=\"line\"><span style=\"color: #F78C6C\">1</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">row</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">in</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">set</span><span style=\"color: #BABED8\">, </span><span style=\"color: #F78C6C\">1</span><span style=\"color: #BABED8\"> warning (</span><span style=\"color: #F78C6C\">0</span><span style=\"color: #BABED8\">.</span><span style=\"color: #F78C6C\">00</span><span style=\"color: #BABED8\"> sec)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">mysql</span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #BABED8\"> explain </span><span style=\"color: #F78C6C\">select</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">count</span><span style=\"color: #BABED8\">(</span><span style=\"color: #89DDFF\">*</span><span style=\"color: #BABED8\">) </span><span style=\"color: #F78C6C\">from</span><span style=\"color: #BABED8\"> user </span><span style=\"color: #F78C6C\">group by</span><span style=\"color: #BABED8\"> id;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">+</span><span style=\"color: #676E95; font-style: italic\">----+-------------+-------+------------+-------+-----------------+---------+---------+------+------+----------+-------------+</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">| id | select_type | </span><span style=\"color: #F78C6C\">table</span><span style=\"color: #BABED8\"> | partitions | </span><span style=\"color: #F78C6C\">type</span><span style=\"color: #BABED8\">  | possible_keys   | </span><span style=\"color: #F78C6C\">key</span><span style=\"color: #BABED8\">     | key_len | ref  | </span><span style=\"color: #F78C6C\">rows</span><span style=\"color: #BABED8\"> | filtered | Extra       |</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">+</span><span style=\"color: #676E95; font-style: italic\">----+-------------+-------+------------+-------+-----------------+---------+---------+------+------+----------+-------------+</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">|  </span><span style=\"color: #F78C6C\">1</span><span style=\"color: #BABED8\"> | </span><span style=\"color: #F78C6C\">SIMPLE</span><span style=\"color: #BABED8\">      | user  | </span><span style=\"color: #F78C6C\">NULL</span><span style=\"color: #BABED8\">       | </span><span style=\"color: #F78C6C\">index</span><span style=\"color: #BABED8\"> | </span><span style=\"color: #F78C6C\">PRIMARY</span><span style=\"color: #BABED8\">,account | </span><span style=\"color: #F78C6C\">PRIMARY</span><span style=\"color: #BABED8\"> | </span><span style=\"color: #F78C6C\">4</span><span style=\"color: #BABED8\">       | </span><span style=\"color: #F78C6C\">NULL</span><span style=\"color: #BABED8\"> | </span><span style=\"color: #F78C6C\">1051</span><span style=\"color: #BABED8\"> |   </span><span style=\"color: #F78C6C\">100</span><span style=\"color: #BABED8\">.</span><span style=\"color: #F78C6C\">00</span><span style=\"color: #BABED8\"> | </span><span style=\"color: #F78C6C\">Using</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">index</span><span style=\"color: #BABED8\"> |</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">+</span><span style=\"color: #676E95; font-style: italic\">----+-------------+-------+------------+-------+-----------------+---------+---------+------+------+----------+-------------+</span></span>\n<span class=\"line\"><span style=\"color: #F78C6C\">1</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">row</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">in</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">set</span><span style=\"color: #BABED8\">, </span><span style=\"color: #F78C6C\">1</span><span style=\"color: #BABED8\"> warning (</span><span style=\"color: #F78C6C\">0</span><span style=\"color: #BABED8\">.</span><span style=\"color: #F78C6C\">00</span><span style=\"color: #BABED8\"> sec)</span></span></code></pre></div><blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>Extra : Using temporary 表示Mysql创建了临时表来查询存储结果，通用在排序或分组发生</p></blockquote>\n<div class=\"language-sql\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">sql</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #BABED8\">mysql</span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #BABED8\"> explain </span><span style=\"color: #F78C6C\">select</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">count</span><span style=\"color: #BABED8\">(</span><span style=\"color: #89DDFF\">*</span><span style=\"color: #BABED8\">) </span><span style=\"color: #F78C6C\">from</span><span style=\"color: #BABED8\"> user </span><span style=\"color: #F78C6C\">where</span><span style=\"color: #BABED8\"> id </span><span style=\"color: #F78C6C\">in</span><span style=\"color: #BABED8\">( </span><span style=\"color: #F78C6C\">100</span><span style=\"color: #BABED8\">,</span><span style=\"color: #F78C6C\">123</span><span style=\"color: #BABED8\">,</span><span style=\"color: #F78C6C\">112</span><span style=\"color: #BABED8\">,</span><span style=\"color: #F78C6C\">121</span><span style=\"color: #BABED8\">);</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">+</span><span style=\"color: #676E95; font-style: italic\">----+-------------+-------+------------+-------+---------------+---------+---------+------+------+----------+--------------------------+</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">| id | select_type | </span><span style=\"color: #F78C6C\">table</span><span style=\"color: #BABED8\"> | partitions | </span><span style=\"color: #F78C6C\">type</span><span style=\"color: #BABED8\">  | possible_keys | </span><span style=\"color: #F78C6C\">key</span><span style=\"color: #BABED8\">     | key_len | ref  | </span><span style=\"color: #F78C6C\">rows</span><span style=\"color: #BABED8\"> | filtered | Extra                    |</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">+</span><span style=\"color: #676E95; font-style: italic\">----+-------------+-------+------------+-------+---------------+---------+---------+------+------+----------+--------------------------+</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">|  </span><span style=\"color: #F78C6C\">1</span><span style=\"color: #BABED8\"> | </span><span style=\"color: #F78C6C\">SIMPLE</span><span style=\"color: #BABED8\">      | user  | </span><span style=\"color: #F78C6C\">NULL</span><span style=\"color: #BABED8\">       | </span><span style=\"color: #F78C6C\">range</span><span style=\"color: #BABED8\"> | </span><span style=\"color: #F78C6C\">PRIMARY</span><span style=\"color: #BABED8\">       | </span><span style=\"color: #F78C6C\">PRIMARY</span><span style=\"color: #BABED8\"> | </span><span style=\"color: #F78C6C\">4</span><span style=\"color: #BABED8\">       | </span><span style=\"color: #F78C6C\">NULL</span><span style=\"color: #BABED8\"> |    </span><span style=\"color: #F78C6C\">4</span><span style=\"color: #BABED8\"> |   </span><span style=\"color: #F78C6C\">100</span><span style=\"color: #BABED8\">.</span><span style=\"color: #F78C6C\">00</span><span style=\"color: #BABED8\"> | </span><span style=\"color: #F78C6C\">Using</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">where</span><span style=\"color: #BABED8\">; </span><span style=\"color: #F78C6C\">Using</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">index</span><span style=\"color: #BABED8\"> |</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">+</span><span style=\"color: #676E95; font-style: italic\">----+-------------+-------+------------+-------+---------------+---------+---------+------+------+----------+--------------------------+</span></span>\n<span class=\"line\"><span style=\"color: #F78C6C\">1</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">row</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">in</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">set</span><span style=\"color: #BABED8\">, </span><span style=\"color: #F78C6C\">1</span><span style=\"color: #BABED8\"> warning (</span><span style=\"color: #F78C6C\">0</span><span style=\"color: #BABED8\">.</span><span style=\"color: #F78C6C\">00</span><span style=\"color: #BABED8\"> sec)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">mysql</span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #BABED8\"> explain </span><span style=\"color: #F78C6C\">select</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">count</span><span style=\"color: #BABED8\">(</span><span style=\"color: #89DDFF\">*</span><span style=\"color: #BABED8\">) </span><span style=\"color: #F78C6C\">from</span><span style=\"color: #BABED8\"> user </span><span style=\"color: #F78C6C\">where</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">name</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">in</span><span style=\"color: #BABED8\">( user1,user3,user20,user40);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">ERROR </span><span style=\"color: #F78C6C\">1054</span><span style=\"color: #BABED8\"> (42S22): Unknown column </span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #C3E88D\">user1</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">in</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #C3E88D\">where clause</span><span style=\"color: #89DDFF\">&#39;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">mysql</span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #BABED8\"> explain </span><span style=\"color: #F78C6C\">select</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">count</span><span style=\"color: #BABED8\">(</span><span style=\"color: #89DDFF\">*</span><span style=\"color: #BABED8\">) </span><span style=\"color: #F78C6C\">from</span><span style=\"color: #BABED8\"> user </span><span style=\"color: #F78C6C\">where</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">name</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">in</span><span style=\"color: #BABED8\">( </span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #C3E88D\">user1</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #BABED8\">,</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #C3E88D\">user3</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #BABED8\">,</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #C3E88D\">user20</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #BABED8\">,</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #C3E88D\">user40</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #BABED8\">);</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">+</span><span style=\"color: #676E95; font-style: italic\">----+-------------+-------+------------+------+---------------+------+---------+------+------+----------+-------------+</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">| id | select_type | </span><span style=\"color: #F78C6C\">table</span><span style=\"color: #BABED8\"> | partitions | </span><span style=\"color: #F78C6C\">type</span><span style=\"color: #BABED8\"> | possible_keys | </span><span style=\"color: #F78C6C\">key</span><span style=\"color: #BABED8\">  | key_len | ref  | </span><span style=\"color: #F78C6C\">rows</span><span style=\"color: #BABED8\"> | filtered | Extra       |</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">+</span><span style=\"color: #676E95; font-style: italic\">----+-------------+-------+------------+------+---------------+------+---------+------+------+----------+-------------+</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">|  </span><span style=\"color: #F78C6C\">1</span><span style=\"color: #BABED8\"> | </span><span style=\"color: #F78C6C\">SIMPLE</span><span style=\"color: #BABED8\">      | user  | </span><span style=\"color: #F78C6C\">NULL</span><span style=\"color: #BABED8\">       | ALL  | </span><span style=\"color: #F78C6C\">NULL</span><span style=\"color: #BABED8\">          | </span><span style=\"color: #F78C6C\">NULL</span><span style=\"color: #BABED8\"> | </span><span style=\"color: #F78C6C\">NULL</span><span style=\"color: #BABED8\">    | </span><span style=\"color: #F78C6C\">NULL</span><span style=\"color: #BABED8\"> | </span><span style=\"color: #F78C6C\">1051</span><span style=\"color: #BABED8\"> |    </span><span style=\"color: #F78C6C\">40</span><span style=\"color: #BABED8\">.</span><span style=\"color: #F78C6C\">00</span><span style=\"color: #BABED8\"> | </span><span style=\"color: #F78C6C\">Using</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">where</span><span style=\"color: #BABED8\"> |</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">+</span><span style=\"color: #676E95; font-style: italic\">----+-------------+-------+------------+------+---------------+------+---------+------+------+----------+-------------+</span></span>\n<span class=\"line\"><span style=\"color: #F78C6C\">1</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">row</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">in</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">set</span><span style=\"color: #BABED8\">, </span><span style=\"color: #F78C6C\">1</span><span style=\"color: #BABED8\"> warning (</span><span style=\"color: #F78C6C\">0</span><span style=\"color: #BABED8\">.</span><span style=\"color: #F78C6C\">00</span><span style=\"color: #BABED8\"> sec)</span></span></code></pre></div>","feature":true,"text":"explain常用字段 type ：访问的类型 key ：实际使用到的索引，如果为NULL，则没有使用索引 ref ：显示索引的哪一列被使用了，如果可能的话，是...","permalink":"/post/arary/Explain","photos":[],"count_time":{"symbolsCount":"8.3k","symbolsTime":"8 mins."},"categories":[{"name":"mysql","slug":"mysql","count":1,"path":"api/categories/mysql.json"}],"tags":[{"name":"mysql","slug":"mysql","count":1,"path":"api/tags/mysql.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#explain%E5%B8%B8%E7%94%A8%E5%AD%97%E6%AE%B5\"><span class=\"toc-text\">explain常用字段</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E8%A1%A8%E6%95%B0%E6%8D%AE\"><span class=\"toc-text\">表数据</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%B8%B8%E7%94%A8%E5%88%86%E6%9E%90\"><span class=\"toc-text\">常用分析</span></a></li></ol>","author":{"name":"panther","slug":"blog-author","avatar":"https://files.superbed.cn/proxy/726e6e6a692035356d716a72756e7534797e743478797f78756934797577352a237c7b2f2b297e282c232d2f237f7f2f2a29227f297b287b287c782e292b2c2c7e28287e7c2c7834706a7d","link":"/","description":"一身转战三千里,一剑曾当百万师。","socials":{"github":{"icon":"iconfont icon-github","link":"https://github.com/panther125"},"twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"hidden":false,"prev_post":{},"next_post":{"title":"Redis实战之Redisson使用技巧详解","uid":"62f0380213af8188cf68f0ab26ba211b","slug":"backend/redisson","date":"2024-05-16T04:01:51.000Z","updated":"2024-06-13T03:11:03.261Z","comments":true,"path":"api/articles/backend/redisson.json","keywords":null,"cover":"https://a1.boltp.com/2024/06/13/666a58fa1f778.webp","text":"摘要什么是 Redisson？来自于官网上的描述内容如下！ Redisson 是一个在 Redis 的基础上实现的 Java 驻内存数据网格客户端（In-Mem...","permalink":"/post/backend/redisson","photos":[],"count_time":{"symbolsCount":"9.3k","symbolsTime":"8 mins."},"categories":[{"name":"backend","slug":"backend","count":2,"path":"api/categories/backend.json"}],"tags":[{"name":"redis","slug":"redis","count":1,"path":"api/tags/redis.json"}],"author":{"name":"panther","slug":"blog-author","avatar":"https://files.superbed.cn/proxy/726e6e6a692035356d716a72756e7534797e743478797f78756934797577352a237c7b2f2b297e282c232d2f237f7f2f2a29227f297b287b287c782e292b2c2c7e28287e7c2c7834706a7d","link":"/","description":"一身转战三千里,一剑曾当百万师。","socials":{"github":{"icon":"iconfont icon-github","link":"https://github.com/panther125"},"twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"feature":true}}